# 图片压缩工具

一个基于FFmpeg的图片压缩工具，支持批量压缩图片到指定大小，提供直观的GUI界面。

## 功能特点

- **多格式支持**: 支持PNG、JPG、JPEG、BMP、TIFF、WEBP、GIF等多种图片格式
- **批量处理**: 支持一次性添加多张图片进行批量压缩
- **目标大小控制**: 可设置目标文件大小（KB），工具将自动调整画质以接近目标大小
- **智能压缩**: 使用FFmpeg进行高效的图片压缩，保持最佳画质
- **重复文件检测**: 自动检测并过滤重复的图片文件
- **进度显示**: 实时显示压缩进度和当前文件状态
- **文件管理**: 支持移除选中文件、清空列表等操作
- **目录选择**: 可自定义输出目录保存压缩后的图片
- **错误处理**: 完善的错误处理和用户提示

## 使用方法

### 1. 准备工作
- 安装Python 3.x
- 安装FFmpeg并将其添加到系统PATH环境变量中
- 安装必要的依赖库

### 2. 依赖安装
```bash
pip install PyQt6
```

### 3. 启动工具
运行`图片压缩工具.py`文件启动GUI界面

### 4. 文件操作
- **添加图片**: 点击"添加图片"按钮，选择要压缩的图片文件
- **移除选中**: 选中列表中的图片，点击"移除选中"按钮
- **清空列表**: 点击"清空列表"按钮清空所有已添加的图片

### 5. 设置参数
- **输出目录**: 点击"浏览..."按钮选择压缩后图片的保存目录（默认为桌面）
- **目标大小**: 在"目标大小"输入框中设置期望的文件大小（单位KB，默认500KB）

### 6. 开始压缩
- **开始压缩**: 点击"开始压缩"按钮启动压缩任务
- **查看进度**: 底部进度条显示当前压缩进度
- **完成提示**: 压缩完成后会提示是否打开输出目录

## 注意事项

- **FFmpeg依赖**: 必须安装FFmpeg并确保在命令行中可执行
- **压缩算法**: 工具使用FFmpeg的JPEG质量参数进行压缩，在目标大小和画质之间寻找平衡
- **文件备份**: 压缩过程中不会修改原文件，输出文件以"_compressed"后缀保存
- **处理时间**: 大量高分辨率图片的处理可能需要较长时间，请耐心等待
- **存储空间**: 确保输出目录有足够的存储空间
- **目标大小**: 设置过小的目标大小可能会导致画质严重下降
- **停止任务**: 压缩过程中如需停止，可关闭窗口并确认停止操作

## 常见问题

**Q: 提示"未找到FFmpeg"怎么办？**
A: 请下载并安装FFmpeg，将其bin目录添加到系统PATH环境变量中。

**Q: 压缩后的图片质量如何？**
A: 工具会尽量在目标大小限制内保持最佳画质，但目标大小设置过小会影响画质。

**Q: 支持哪些图片格式？**
A: 支持PNG、JPG、JPEG、BMP、TIFF、WEBP、GIF等主流格式。