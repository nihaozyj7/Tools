# 歌词微调工具

一个用于编辑和微调音频文件中嵌入歌词时间轴的工具，支持多种音频格式并提供直观的GUI界面。

## 功能特点

- **多格式支持**: 支持MP3、FLAC、M4A、MP4等主流音频格式
- **歌词读取**: 自动读取音频文件中嵌入的歌词（ID3 USLT/SYLT、FLAC LYRICS、MP4 ©lyr等标签）
- **可视化编辑**: 通过列表形式展示歌词行，支持双击跳转到对应时间点
- **精确微调**: 支持对单行歌词时间戳进行精确调整（±100ms按钮）
- **全局调整**: 支持对整首歌曲歌词进行整体时间偏移（±500ms按钮）
- **音频播放**: 集成音频播放功能（使用VLC后端），可播放当前音频文件
- **备份保护**: 写回歌词前自动备份原文件到`.bf`目录
- **实时同步**: 播放进度与歌词高亮实时同步显示
- **滑动控制**: 时间轴滑块可直接拖动跳转播放位置

## 使用方法

### 1. 准备工作
- 安装Python 3.x
- 安装必要的依赖库

### 2. 依赖安装
```bash
pip install PyQt6 mutagen python-vlc qdarkstyle
```

### 3. 启动工具
运行`歌词微调.py`文件启动GUI界面

### 4. 文件操作
- **选择文件夹**: 点击"📂 打开文件夹"按钮，选择包含音频文件的目录
- **重新扫描**: 点击"🔁 重新扫描"按钮重新加载目录中的音频文件
- **选择音频**: 在文件列表中双击或单击音频文件进行加载

### 5. 歌词编辑
- **播放音频**: 点击"▶️ 播放"按钮播放当前音频
- **跳转歌词**: 在歌词列表中双击任一行可跳转到对应的播放时间点
- **微调时间**: 
  - 选中歌词行后，使用"-100ms"/"+100ms"按钮调整当前行时间戳
  - 使用"整体 -500ms"/"整体 +500ms"按钮对所有歌词行进行整体偏移
- **查看时间**: 底部显示当前播放时间和总时长，可通过滑块拖拽跳转

### 6. 保存更改
- **写回歌词**: 点击右下角"💾 写回并备份"按钮，将修改后的歌词保存到原音频文件
- **备份文件**: 系统会自动备份原文件到音频文件所在目录的`.bf`子目录

## 界面说明

- **左侧**: 文件列表（文件名、标题、艺术家）
- **右侧**:
  - 上部分: 歌词列表（带时间戳）
  - 中部分: 播放控制（播放/暂停/停止、时间显示、进度滑块）
  - 下部分: 微调按钮（左）和写回按钮（右下角强调色）

## 注意事项

- 工具会自动备份原文件到`.bf`目录，写回前请确认修改正确
- 歌词时间戳格式为LRC标准格式（如[01:23.45]）
- 某些音频格式可能不包含嵌入歌词，只能显示原始文本
- 如果没有安装VLC播放器，将使用模拟播放模式
- 大文件加载可能需要稍长时间，请耐心等待
- 建议在使用前备份重要音频文件
- 时间调整后，歌词会自动按时间顺序重新排列