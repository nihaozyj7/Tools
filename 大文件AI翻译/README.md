# 大文件AI翻译工具

一个基于AI的文本翻译工具，特别适用于处理大文件，能够将大文件分块处理并通过AI进行翻译。

## 功能特点

- **大文件支持**: 能够处理大文本文件，自动分块翻译，避免超出AI服务的token限制
- **多格式支持**: 支持多种文本格式，包括.txt、.md、.ini、.json、.log等
- **智能分段**: 智能的文本分段算法，保持句子完整性
- **上下文保持**: 提供多种上下文策略（重叠句子、迭代摘要）以保持翻译连贯性
- **GUI界面**: 直观的图形用户界面，易于使用
- **配置记忆**: 自动保存和加载API配置信息
- **后台处理**: 支持后台翻译，保持界面响应
- **错误重试**: 具备自动重试机制，提高翻译成功率

## 使用方法

### 1. 准备工作
- 获取AI服务API Key（如OpenAI、通义千问等）
- 确认API服务Base URL和模型名称
- 安装Python 3.x和所需依赖

### 2. 依赖安装
```bash
pip install PyQt6 requests
```

### 3. 配置参数
- **Base URL**: AI服务的API端点URL
- **API Key**: 你的AI服务API密钥
- **Model**: 使用的AI模型名称
- **记住设置**: 勾选后会将配置保存到config.json文件

### 4. 选择文件
- 点击"选择源文件"按钮，选择需要翻译的文本文件
- 点击"选择输出目录"指定翻译结果的保存位置

### 5. 设置翻译参数
- **目标语言**: 指定翻译目标语言
- **提示词模板**: 自定义翻译指令模板
- **Chunk最大字符数**: 每个分块的最大字符数
- **Overlap sentences**: 分块间重叠的句子数量（保持上下文连贯）
- **上下文策略**: 选择上下文保持策略（重叠或迭代摘要）

### 6. 开始翻译
- 点击"开始翻译"按钮启动翻译过程
- 通过进度条和日志窗口查看翻译进度
- 翻译完成后查看输出文件

## 配置文件

工具会自动创建`config.json`文件保存配置信息：
- `base_url`: API服务地址
- `api_key`: API密钥
- `model`: 使用的模型名称
- `remember`: 是否记住设置

## 注意事项

- 翻译质量和速度取决于所使用的AI服务
- 大文件翻译可能需要较长时间，建议耐心等待
- 翻译费用取决于AI服务提供商的计费方式
- 某些文件编码可能需要手动指定
- 翻译过程中请保持网络连接稳定
- API密钥请妥善保管，避免泄露
- 如果翻译质量不理想，可以调整提示词模板或使用不同的模型
- 分块大小和重叠设置会影响翻译质量和上下文连贯性，请根据实际需求调整

## 常见问题

**Q: 为什么需要分块处理？**
A: 大多数AI服务都有token限制，分块处理可以处理超过限制的文件。

**Q: 如何提高翻译连贯性？**
A: 调整"Overlap sentences"参数，增加重叠句子数量，或选择"iterative_summary"策略。

**Q: 翻译失败怎么办？**
A: 检查API密钥是否正确，网络连接是否正常，并确认API服务是否可用。